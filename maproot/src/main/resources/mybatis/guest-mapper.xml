<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="guest">

<select id="sequence" resultType="int">
	select guest_seq.nextval from dual
</select>

<insert id="insert">
	insert into guest(
	guest_no,guest_nickname, guest_key, guest_last_ip, guest_wtime
	) values (
	#{guestNo}, #{guestNickname}, #{guestKey}, #{guestLastIp}, #{guestWtime}
	)
</insert>

<select id="select" resultType="GuestDto">
  select * from guest
  where guest_key = #{guestKey}
</select>

<update id="update">
	update guest 
    <set>
        <if test="guestNickname != null">
            guest_nickname = #{guestNickname},
        </if>
        <if test="guestKey != null">
            guest_key = #{guestKey},
        </if>
        <if test="guestLastIp != null">
            guest_last_ip = #{guestLastIp},
        </if>
        guest_mtime = SYSDATE
    </set>
    WHERE guest_no = #{guestNo}
</update>

<select id="selectOne" resultType="GuestDto">
	select * from guest where guest_no = #{guestNo}
</select>

<select id="selectByNickname" resultType="int">
	select * from guest where guest_nickname = #{guestNickname}
</select>
	
	
</mapper>